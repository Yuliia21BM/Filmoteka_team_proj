!function(){function t(t,e,n,o){Object.defineProperty(t,e,{get:n,set:o,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},i=n.parcelRequired7c6;null==i&&((i=function(t){if(t in o)return o[t].exports;if(t in r){var e=r[t];delete r[t];var n={id:t,exports:{}};return o[t]=n,e.call(n.exports,n,n.exports),n.exports}var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){r[t]=e},n.parcelRequired7c6=i),i.register("iE7OH",(function(e,n){var o,r;t(e.exports,"register",(function(){return o}),(function(t){return o=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var i={};o=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)i[e[n]]=t[e[n]]},r=function(t){var e=i[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),i.register("gSlC7",(function(e,n){t(e.exports,"openModal",(function(){return u}));var o=i("sRYpV"),r=i("cxvFw"),a=i("lHYoS"),l=i("3dy0j"),s=i("ebqVR"),c=i("dyT35");async function d(t){const e=await JSON.parse(localStorage.getItem(t)),n=!(!e||e==[]);return console.log(n),!!n&&(console.log(e),e)}function u(t,e){if(!t.target.parentNode.classList.contains(e))return;const n=t.target.parentNode.dataset.filmId;(0,o.searchMovieById)(n).then((({poster_path:t,title:e,genres:o,vote_count:i,vote_average:u,popularity:f,original_title:m,overview:p})=>{const _=o?o.map((t=>t.name)).join(", "):"Unknown",b={onShow:()=>{document.body.classList.add("hide-scroll")},onClose:()=>{document.body.classList.remove("hide-scroll"),v.removeEventListener("click",(()=>{watchBtn.removeEventListener("click",a.addWatch),queueBtn.removeEventListener("click",a.addQueue),h.close()}))}},h=c.create(`\n        <div class="film-modal">\n                <button class="film-modal__close-btn" type="button"></button>\n                <div class="film-modal__poster-wrapper"><img class="film-modal__poster" src="${t?"https://image.tmdb.org/t/p/w500"+t:""}" alt="Movie ${e||"Unknown title"} poster" /></div>\n                <div class="film-modal__wrapper">\n                  <div class="film-modal__info-wrapper">\n                    <h2 class="film-modal__title">${e||"Unknown title"}</h2>\n                    <ul class="film-modal__info-list">\n                        <li class="film-modal__info-item">\n                            <h3 class="film-modal__info-title">Vote/Votes</h3>\n                            <p class="film-modal__info-text"><span class="film-modal__info-text--vote">${u?u.toFixed(1):"--"}</span>  <span class="film-modal__info-text--slash">/</span> <span class="film-modal__info-text--vote film-modal__info-text--vote-count">${i||"--"}</p></span>\n                        </li>\n                        <li class="film-modal__info-item">\n                            <h3 class="film-modal__info-title">Popularity</h3>\n                            <p class="film-modal__info-text">${f?f.toFixed(1):"--"}</p>\n                        </li>\n                        <li class="film-modal__info-item">\n                            <h3 class="film-modal__info-title">Original Title</h3>\n                            <p class="film-modal__info-text">${m||"Unknown"}</p>\n                        </li>\n                        <li class="film-modal__info-item">\n                            <h3 class="film-modal__info-title">Genre</h3>\n                            <p class="film-modal__info-text">${_}</p>\n                        </li>\n                        <li class="film-modal__info-item">\n                            <h3 class="film-modal__info-title">Trailer</h3>\n\n                            <p id="trailerBtns-wrapper" class="film-modal__info-text"><button class="film-modal__trailer-btn" type="button" data-id="${n}">Watch trailer<span class="triangle-right"></span></button></p>\n\n                        </li>\n                    </ul>\n                    <h3 class="film-modal__title-about">About</h3>\n                    <p class="film-modal__text-about">${p||"No description"}</p>\n                    </div>  \n                <div class="film-modal__add-btns-wrapper">\n                  <button class="film-modal__add-btns btn-add-watched hover-modal-btn trailer-btn" type="button" data-id="${n}">Add to Watched</button>\n                  <button class="film-modal__add-btns btn-add-queue film-modal__add-btns--seconadry-btn hover-modal-btn" type="button" data-id="${n}">Add to queue</button>\n                </div>\n                </div>\n        </div>`,b);if(h.show(),(0,r.buildTrailerBtns)(n,h),t||(document.querySelector(".film-modal__poster").remove(),document.querySelector(".film-modal__poster-wrapper").appendChild(l.defaultPoster).classList.add("film-modal__poster")),h.visible()){const t=document.querySelector("button.btn-add-watched"),e=document.querySelector("button.btn-add-queue");t.addEventListener("click",a.addWatch),e.addEventListener("click",a.addQueue),d(s.WATCHED_LIST).then((t=>{console.log(t,"watched"),t&&t!==[]&&t.forEach((t=>{t.id!==+n||function(){const t=document.querySelector("button.btn-add-watched");t.textContent="REMOVE FROM WATCHED"}()}))})),d(s.QUEUE_LIST).then((t=>{t&&t!==[]&&t.map((t=>{console.log(t.id!==n,"item.id !== filmId"),t.id!==+n||function(){const t=document.querySelector("button.btn-add-queue");t.textContent="REMOVE FROM QUEUE"}()}))}))}const v=document.querySelector(".film-modal__close-btn");v.appendChild(l.iconCross),v.addEventListener("click",(()=>h.close()))}))}document.querySelector(".main-section__allcards").addEventListener("click",(t=>{u(t,"main-section__card")}))})),i.register("cxvFw",(function(n,o){t(n.exports,"buildTrailerBtns",(function(){return s}));var r=i("sRYpV"),a=i("dyT35"),l=i("z8pGY");document.querySelector(".main-section__allcards");async function s(t,n){const o=await(0,r.searchTrailerById)(t),i=document.querySelector("#trailerBtns-wrapper");if(0===o.results.length)return void(i.innerHTML="No trailers are found");const s=o.results.slice(0,1).map(((t,o)=>{const r=document.createElement("button");return r.innerHTML='Watch trailer<span class="triangle-right"></span>',r.classList.add("film-modal__trailer-btn"),r.addEventListener("click",(()=>function(t,n){n.close();const o=a.create(`\n  <div id="trailer-modal" data-modal>\n  <button class="film-modal__close-btn" type="button" trailer-modal-close>\n   <img class="cross-button__icon" src="${e(l)}" />\n  </button>\n  <iframe\n    id="trailer-iframe"\n   \n    title="YouTube video player"\n    frameborder="0"\n    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"\n    allowfullscreen\n  ></iframe>  \n</div>`);o.show(),document.querySelector("#trailer-iframe").src=`https://www.youtube.com/embed/${t}`,document.querySelector("[trailer-modal-close]").addEventListener("click",(()=>{o.close(),n.show()}))}(t.key,n))),r}));i.innerHTML="",i.append(...s)}})),i.register("dyT35",(function(t,e){t.exports=function t(e,n,o){function r(a,l){if(!n[a]){if(!e[a]){var s=void 0;if(!l&&s)return s(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[a]={exports:{}};e[a][0].call(d.exports,(function(t){return r(e[a][1][t]||t)}),d,d.exports,t,e,n,o)}return n[a].exports}for(var i=void 0,a=0;a<o.length;a++)r(o[a]);return r}({1:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.create=n.visible=void 0;var o=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("div");return n.innerHTML=t.trim(),!0===e?n.children:n.firstChild},r=function(t,e){var n=t.children;return 1===n.length&&n[0].tagName===e},i=function(t){return null!=(t=t||document.querySelector(".basicLightbox"))&&!0===t.ownerDocument.body.contains(t)};n.visible=i,n.create=function(t,e){var n=function(t,e){var n=o('\n\t\t<div class="basicLightbox '.concat(e.className,'">\n\t\t\t<div class="basicLightbox__placeholder" role="dialog"></div>\n\t\t</div>\n\t')),i=n.querySelector(".basicLightbox__placeholder");t.forEach((function(t){return i.appendChild(t)}));var a=r(i,"IMG"),l=r(i,"VIDEO"),s=r(i,"IFRAME");return!0===a&&n.classList.add("basicLightbox--img"),!0===l&&n.classList.add("basicLightbox--video"),!0===s&&n.classList.add("basicLightbox--iframe"),n}(t=function(t){var e="string"==typeof t,n=t instanceof HTMLElement==1;if(!1===e&&!1===n)throw new Error("Content must be a DOM element/node or string");return!0===e?Array.from(o(t,!0)):"TEMPLATE"===t.tagName?[t.content.cloneNode(!0)]:Array.from(t.children)}(t),e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null==(t=Object.assign({},t)).closable&&(t.closable=!0),null==t.className&&(t.className=""),null==t.onShow&&(t.onShow=function(){}),null==t.onClose&&(t.onClose=function(){}),"boolean"!=typeof t.closable)throw new Error("Property `closable` must be a boolean");if("string"!=typeof t.className)throw new Error("Property `className` must be a string");if("function"!=typeof t.onShow)throw new Error("Property `onShow` must be a function");if("function"!=typeof t.onClose)throw new Error("Property `onClose` must be a function");return t}(e)),a=function(t){return!1!==e.onClose(l)&&function(t,e){return t.classList.remove("basicLightbox--visible"),setTimeout((function(){return!1===i(t)||t.parentElement.removeChild(t),e()}),410),!0}(n,(function(){if("function"==typeof t)return t(l)}))};!0===e.closable&&n.addEventListener("click",(function(t){t.target===n&&a()}));var l={element:function(){return n},visible:function(){return i(n)},show:function(t){return!1!==e.onShow(l)&&function(t,e){return document.body.appendChild(t),setTimeout((function(){requestAnimationFrame((function(){return t.classList.add("basicLightbox--visible"),e()}))}),10),!0}(n,(function(){if("function"==typeof t)return t(l)}))},close:a};return l}},{}]},{},[1])(1)})),i.register("z8pGY",(function(t,e){t.exports=i("aNJCr").getBundleURL("EVgbq")+i("iE7OH").resolve("cbWmX")})),i.register("aNJCr",(function(e,n){var o;t(e.exports,"getBundleURL",(function(){return o}),(function(t){return o=t}));var r={};function i(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(t){var e=r[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\/\/[^)\n]+/g);if(t)return i(t[2])}return"/"}(),r[t]=e),e}})),i.register("lHYoS",(function(e,n){t(e.exports,"addWatch",(function(){return a})),t(e.exports,"addQueue",(function(){return l}));var o=i("sRYpV"),r=i("ebqVR");async function a(t){const e=t.currentTarget.dataset.id;try{const n=await s(e);if(!n)return;const o=JSON.parse(localStorage.getItem(r.WATCHED_LIST))||[];let i=!1;o.forEach((e=>{if(e.id===n.id){const n=o.indexOf(e);o.splice(n,1),i=!0,t.target.textContent="ADD TO WATCHED"}})),i||(o.push(n),t.target.textContent="REMOVE FROM WATCHED"),localStorage.setItem(r.WATCHED_LIST,JSON.stringify(o))}catch(t){console.log(t)}}async function l(t){const e=t.currentTarget.dataset.id;try{const n=await s(e);if(!n)return;const o=JSON.parse(localStorage.getItem(r.QUEUE_LIST))||[];let i=!1;o.forEach((e=>{if(e.id===n.id){const n=o.indexOf(e);o.splice(n,1),i=!0,t.target.textContent="ADD TO QUEUE"}})),i||(o.push(n),t.target.textContent="REMOVE FROM QUEUE"),localStorage.setItem(r.QUEUE_LIST,JSON.stringify(o))}catch(t){console.log(t)}}async function s(t){try{const e="https://image.tmdb.org/t/p/w500",n=await(0,o.searchMovieById)(t);return{id:n.id,title:`${n.title?n.title:"Unknown"}`,poster_path:`${n.poster_path?e+n.poster_path:"../images/default-poster.jpg"}`,genres:`${n.genres?c(n.genres):"Unknown"}`,vote_average:`${n.vote_average?n.vote_average.toFixed(1):"0"}`,release_date:`${n.release_date?n.release_date.slice(0,4):"n/a"}`}}catch(t){throw t}}function c(t){const e=t.map((t=>t.name)).join(", ").split(",");return e.length>3?`${e.slice(1)}, Other`:e}})),i("iE7OH").register(JSON.parse('{"EVgbq":"index.c63f4dbe.js","cbWmX":"close-modal-film-icon.d349cae7.svg","2i8Kt":"library.121cbcdd.js"}')),i("ebqVR"),i("sRYpV"),i("gSlC7"),i("jcFG7"),i("cxvFw"),i("jjmYL"),i("lHYoS")}();
//# sourceMappingURL=index.c63f4dbe.js.map
