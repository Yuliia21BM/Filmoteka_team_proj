{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-b7d1bbf21e889446.js","src/js/library-queue-list.js","src/js/refs.js","src/js/render-card.js","src/js/popular-film-API.js","node_modules/@parcel/runtime-js/lib/runtime-3709e3bb493177d0.js","src/js/localstorage-load-films.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"1zJhX\\\":\\\"library.c62aaa26.js\\\",\\\"2O46N\\\":\\\"not-found-gif.2777c0e4.gif\\\",\\\"jW8E1\\\":\\\"library.ed65a94c.js\\\"}\"));","import { QUEUE_LIST, WATCHED_LIST } from './config';\nimport { loadFromStorage } from './localstorage-load-films';\nimport { refs } from './refs';\n\n// -------------üëá –î–ª—è —Ç–µ—Å—Ç—ñ–≤ ------------\n// localStorage.setItem(QUEUE_LIST, JSON.stringify(movie));\n// localStorage.removeItem(QUEUE_LIST);\n// -------------‚òù –î–ª—è —Ç–µ—Å—Ç—ñ–≤ -------------\n\n// STARTS HERE <================================================================<<<<\n\nconst onWatchedBtnClick = () => {\n  if (refs.watchedBtn.classList.contains('header-lib__btn--current')) {\n    return;\n  }\n  loadFromStorage(WATCHED_LIST);\n\n  refs.queueBtn.classList.toggle('header-lib__btn--current');\n  refs.watchedBtn.classList.toggle('header-lib__btn--current');\n};\n\nconst onQueueBtnClick = () => {\n  if (refs.queueBtn.classList.contains('header-lib__btn--current')) {\n    return;\n  }\n  loadFromStorage(QUEUE_LIST);\n\n  refs.watchedBtn.classList.toggle('header-lib__btn--current');\n  refs.queueBtn.classList.toggle('header-lib__btn--current');\n};\n\nconst onLoad = () => {\n  // –ü—Ä–æ–±–ª–µ–º–∞: —è–∫—â–æ –∞–∫—Ç–∏–≤–Ω–∏–π —Å–ø–∏—Å–æ–∫ watched, –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å–≤—Ç–æ—Ä—ñ–Ω–∫–∏,\n  //  –∫–Ω–æ–ø–∫–∏ —â–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ñ, —ñ –∫–ª–∞—Å—ñ–≤ —Ç–µ–∂ –Ω–µ–º–∞, —Ç–æ–º—É –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è queue.\n  // –í–∞—Ä—Ç–æ —â–µ –ø–æ–ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞–¥ —Ñ—É–Ω–∫—Ü—ñ—î—é\n  if (\n    !refs.queueBtn.classList.contains('header-lib__btn--current') ||\n    !refs.watchedBtn.classList.contains('header-lib__btn--current')\n  ) {\n    refs.queueBtn.classList.toggle('header-lib__btn--current');\n    loadFromStorage(QUEUE_LIST);\n  } else if (refs.queueBtn.classList.contains('header-lib__btn--current')) {\n    // refs.queueBtn.classList.toggle('header-lib__btn--current');\n    // refs.watchedBtn.classList.toggle('header-lib__btn--current');\n\n    loadFromStorage(QUEUE_LIST);\n  } else if (refs.watchedBtn.classList.contains('header-lib__btn--current')) {\n    // refs.watchedBtn.classList.toggle('header-lib__btn--current');\n    // refs.queueBtn.classList.toggle('header-lib__btn--current');\n\n    loadFromStorage(WATCHED_LIST);\n  }\n};\n\nrefs.watchedBtn.addEventListener('click', onWatchedBtnClick);\nrefs.queueBtn.addEventListener('click', onQueueBtnClick);\n\nonLoad();\n","export const refs = {\n  mainContainerEl: document.querySelector('.main-section__allcards'),\n  searchForm: document.querySelector('.search'),\n  input_error: document.querySelector('.warning-notification'),\n  watchedBtn: document.querySelector('.header-lib__btn-watched'),\n  queueBtn: document.querySelector('.header-lib__btn-queue'),\n  paginationWrap: document.querySelector('.pagination-container'),\n};\n","import { searchGenres } from './fetchApi';\nimport { refs } from './refs';\nimport { defaultPoster } from './create-images-for-js-input';\nimport { renderSkeleton } from './popular-film-API';\n\nexport const clearMarkup = el => {\n  el.innerHTML = '';\n};\n\nexport async function renderFilmCards(elem) {\n  renderSkeleton();\n  const allCards = elem\n    .map(film => {\n      return createElementsMovie(film);\n    })\n    .join('');\n\n  clearMarkup(refs.mainContainerEl);\n\n  refs.mainContainerEl.insertAdjacentHTML('beforeend', allCards);\n}\n\nexport function createElementsMovie(data) {\n  const { poster_path, id, title, genre_ids, release_date, vote_average } =\n    data;\n\n  const POSTER_URL = 'https://image.tmdb.org/t/p/w500';\n  let genreFilm = '';\n\n  const markupFromAPI = () => `\n  <li class=\"main-section__card-conteiner\">\n  <div class=\"main-section__card main-section__popup\" data-film-id=\"${data.id}\">\n        <img src=\"${\n          data.poster_path ? POSTER_URL + data.poster_path : defaultPoster.src\n        }\" alt=\"${\n    data.title ? data.title : 'Unknown'\n  }\" class=\"main-section__image\" loading=\"lazy\">\n  <p class=\"main-section__popup-title\"> <span class = \"popUp-title\">About</span> <br/>${\n    data.overview ? data.overview : 'No description'\n  }</p>\n  </div>\n      <div class=\"main-section__card main-section__cards\" data-film-id=\"${\n        data.id\n      }\">\n\t\t\t\t\t<h2 class=\"main-section__card-title\">${\n            data.title ? data.title : 'Unknown title'\n          }</h2>\n                   \n\t\t\t\t\t<p class=\"main-section__description\">${\n            data.genre_ids ? genreFilm : 'Unknown'\n          } | ${data.release_date ? data.release_date.slice(0, 4) : 'n/a'}\n\t\t\t\t\n                <span class=\"main-section__card-rating\">${\n                  data.vote_average ? data.vote_average.toFixed(1) : '0.0'\n                }</span>\n                </p>\n      </div>             \n    </div>`;\n\n  const markupFromStorage = () => `\n  <li class=\"main-section__card-conteiner\">\n  <div class=\"main-section__card main-section__popup\" data-film-id=\"${data.id}\">\n        <img src=\"${\n          data.poster_path ? POSTER_URL + data.poster_path : defaultPoster.src\n        }\" alt=\"${\n    data.title ? data.title : 'Unknown'\n  }\" class=\"main-section__image\" loading=\"lazy\">\n  <p class=\"main-section__popup-title\"> <span class = \"popUp-title\">About</span> <br/>${\n    data.overview ? data.overview : 'No description'\n  }</p>\n  </div>\n      <div class=\"main-section__card main-section__cards\" data-film-id=\"${\n        data.id\n      }\">\n\t\t\t\t\t<h2 class=\"main-section__card-title\">${\n            data.title ? data.title : 'Unknown title'\n          }</h2>\n                   \n\t\t\t\t\t<p class=\"main-section__description\">${\n            data.genre_ids ? genreFilm : 'Unknown'\n          } | ${data.release_date ? data.release_date.slice(0, 4) : 'n/a'}\n\t\t\t\t\n                <span class=\"main-section__card-rating\">${\n                  data.vote_average\n                    ? Number(data.vote_average).toFixed(1)\n                    : '0.0'\n                }</span>\n                </p>\n      </div>             \n    </div>`;\n\n  if (!genre_ids) {\n    genreFilm = data.genres;\n\n    return markupFromStorage();\n  } else if (genre_ids.length <= 3) {\n    genreFilm = genre_ids.map(genre => allGenres.get(genre)).join(', ');\n  } else {\n    genreFilm =\n      allGenres.get(genre_ids[0]) +\n      ', ' +\n      allGenres.get(genre_ids[1]) +\n      ', Other';\n  }\n  return markupFromAPI();\n}\n\nconst allGenres = new Map();\n\nsearchGenres().then(res => {\n  return res.genres.map(({ id, name }) => {\n    allGenres.set(id, name);\n  });\n});\n\nexport const renderNoMoviesMarkup = () => {\n  const notFoundGIF = document.createElement('img');\n  notFoundGIF.src = new URL('../images/not-found-gif.gif', import.meta.url);\n  notFoundGIF.alt = 'Travolta from Pulp Fiction is searching for something';\n  notFoundGIF.class = 'not-found';\n\n  refs.mainContainerEl.innerHTML = `<div class=\"no-movies-wrap\">\n                ${notFoundGIF.outerHTML}\n                <p>No movies here yet</p>\n            </div>`;\n};\n","import { getPopularFilm } from '../js/fetchApi';\nimport * as pagination from './pagination';\nimport { refs } from './refs';\n\nimport { renderFilmCards } from './render-card';\nimport Spinner from './spinner';\nconst spinner = new Spinner();\n\nconst cardsTemplate = `<li class=\"cards-skeleton\">\n        <div class=\"movie--isloading\">\n          <div class=\"loading-image\"></div>\n          <div class=\"loading-content\">\n            <div class=\"loading-text-container\">\n              <div class=\"loading-main-text\"></div>\n              <div class=\"loading-sub-text\"></div>\n            </div>\n            <div class=\"loading-btn\"></div>\n          </div>\n        </div>\n        </li>`;\nconst cardsSkeleton = []; \n\n\nexport const renderSkeleton = () => {\n  for (let i = 1; i <= 20; i+=1) {\n    cardsSkeleton.push(cardsTemplate);\n  }\n  refs.mainContainerEl.innerHTML = cardsSkeleton.join('');\n  return;\n}\n  \nconst _getPopularFilm = () => {\n  spinner.enable();\n  \n  getPopularFilm(pagination.getCurrentPage()).then(\n    ({ page, results, total_pages, total_results }) => {\n      renderFilmCards(results);\n      spinner.disable();\n    }\n  );\n};\n\n//_getPopularFilm();\npagination.subscribeOnPageChange(_getPopularFilm);\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2O46N\")).toString();","import { refs } from './refs';\nimport { renderFilmCards, renderNoMoviesMarkup } from './render-card';\nimport { refs } from './refs';\n\n// Returns parsed data from Local Storage\nexport const loadFromStorage = async key => {\n  try {\n    const savedData = localStorage.getItem(key);\n\n    // If there are no movies added to list in Local Storage, show Travolta GIF from Pulp Fiction\n    if (!savedData || savedData.length <= 2) {\n      renderNoMoviesMarkup();\n      return;\n    }\n\n    let movieList = await JSON.parse(savedData);\n\n    // —Ç—Ä–µ–±–∞ –¥–æ—Ä–æ–±–∏—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É,\n    // —è–∫—â–æ –≤ —Å–ø–∏—Å–∫—É –º–µ–Ω—à–µ 20 —Ñ—ñ–ª—å–º—ñ–≤, —Ö–æ–≤–∞—Ç–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—é\n    if (\n      movieList.length < 20 &&\n      !refs.paginationWrap.classList.contains('visually-hidden')\n    ) {\n      refs.paginationWrap.classList.add('visually-hidden');\n    } else {\n      refs.paginationWrap.classList.remove('visually-hidden');\n    }\n\n    console.log('movieList:', movieList);\n    return renderFilmCards(movieList);\n  } catch (error) {\n    console.error('Error: ', error.message);\n  }\n};\n"],"names":["parcelRequire","register","JSON","parse","$kwJfa","$ee27a4d7c64fc8c4$export$21666b427502ea6d","mainContainerEl","document","querySelector","searchForm","input_error","watchedBtn","queueBtn","paginationWrap","$9TCtp","$704a8c9070f82bfa$var$spinner","default","$704a8c9070f82bfa$var$cardsSkeleton","$704a8c9070f82bfa$export$a8c6765402840764","i","push","innerHTML","join","$2nhTy","subscribeOnPageChange","enable","getPopularFilm","getCurrentPage","then","page","results","total_pages","total_results","$5c9ec74aeed8cd43$export$e6243425577ce802","disable","async","elem","allCards","map","film","data","poster_path","id","title","genre_ids","release_date","vote_average","POSTER_URL","genreFilm","markupFromAPI","$45IZH","defaultPoster","src","overview","slice","toFixed","markupFromStorage","Number","genres","length","genre","$5c9ec74aeed8cd43$var$allGenres","get","$5c9ec74aeed8cd43$export$53e42f87dd0e8976","insertAdjacentHTML","Map","searchGenres","res","name","set","$3fc730a2dd74fd3f$exports","URL","resolve","import","meta","url","toString","$5c9ec74aeed8cd43$export$8e1999a21786fe69","notFoundGIF","createElement","alt","class","outerHTML","$316d29d45be225a8$export$b366658078313913","key","savedData","localStorage","getItem","movieList","classList","contains","add","remove","console","log","error","message","addEventListener","WATCHED_LIST","toggle","QUEUE_LIST"],"version":3,"file":"library.c62aaa26.js.map"}